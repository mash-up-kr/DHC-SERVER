openapi: "3.0.3"
info:
  title: "Application API"
  description: "Application API"
  version: "1.0.0"
paths:
  /api/users:
    get:
      summary: "Search User by Token"
      description: "Find a user by their user token"
      parameters:
        - name: userToken
          in: query
          required: true
          schema:
            type: string
          description: "User token to search for"
          example: "user123token"
      responses:
        "200":
          description: "User found successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SearchUserResponse"
              example:
                id: "507f1f77bcf86cd799439011"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 404
                message: "User not found"

  /api/users/register:
    post:
      summary: "Register User"
      description: "Register a new user with their profile information and mission preferences"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterUserRequest"
            example:
              userToken: "user123token"
              gender: "MALE"
              birthDate:
                date: "2000-01-01"
                calendarType: "SOLAR"
              birthTime: "09:30:00"
              preferredMissionCategoryList: [ "FOOD", "TRANSPORTATION" ]
      responses:
        "201":
          description: "User registered successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RegisterUserResponse"
              example:
                id: "507f1f77bcf86cd799439011"
        "409":
          description: "User already exists"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 409
                message: "User already exists"

  /api/users/{userId}/missions/{missionId}:
    put:
      summary: "Change Mission Status"
      description: "Change the completion status of a specific mission for a user or switch to a new mission. This API also supports love missions (type=LOVE in todayDailyMissionList). Note: Love missions only support 'finished' action (switch is not available). When a mission is completed (finished=true), points are awarded based on difficulty: Easy(1)=50pt, Medium(2)=100pt, Hard(3+)=200pt."
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
        - name: missionId
          in: path
          required: true
          schema:
            type: string
          description: "Mission ID"
          example: "507f1f77bcf86cd799439022"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ToggleMissionRequest"
            examples:
              complete_mission:
                summary: "Complete a mission"
                value:
                  finished: true
              switch_mission:
                summary: "Switch to a new mission"
                value:
                  switch: true
              mark_incomplete:
                summary: "Mark mission as incomplete"
                value:
                  finished: false
      responses:
        "200":
          description: "Mission status updated successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ToggleMissionResponse"
              example:
                missions:
                  - missionId: "507f1f77bcf86cd799439022"
                    category: "식음료"
                    difficulty: 3
                    type: "DAILY"
                    finished: true
                    cost: "10.00"
                    endDate: "2024-01-15"
                    title: "오늘 점심은 집에서 해먹기"
                    switchCount: 0
        "400":
          description: "Validation error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"

  /api/users/{userId}/done:
    post:
      summary: "End Today's Missions"
      description: "Complete today's missions and calculate total saved money. The 'earnedPoint' field includes multiplier (2x if yesterday's daily mission failed, 4x if absent for 2+ days)."
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EndTodayMissionRequest"
            example:
              date: "2024-01-15"
      responses:
        "200":
          description: "Today's missions completed successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EndTodayMissionResponse"
              example:
                todaySavedMoney: "25.50"

  /api/users/{userId}:
    delete:
      summary: "Delete User"
      description: "Delete user account"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "User deleted successfully"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/users/{userId}/fortune:
    get:
      summary: "Get Daily Fortune"
      description: "Get daily fortune for a specific user and date"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
        - name: date
          in: query
          required: false
          schema:
            type: string
            format: date
          description: "Date in YYYY-MM-DD format. If not provided, uses current date."
          example: "2024-01-15"
      responses:
        "200":
          description: "Daily fortune retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DailyFortuneResponse"
              example:
                date: "2024-01-15"
                fortuneTitle: "좋은 하루"
                fortuneDetail: "오늘은 좋은 일이 생길 것입니다"
                totalScore: 60
                positiveScore: 80
                negativeScore: 20
                tips:
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/today-menu.png"
                    title: "오늘의 추천메뉴"
                    description: "샐러드"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/lucky-color.png"
                    title: "행운의 색상"
                    description: "파란색"
                    hexColor: "#0000FF"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/jinxed-color.png"
                    title: "피해야 할 색상"
                    description: "빨간색"
                    hexColor: "#FF0000"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/jinxed-menu.png"
                    title: "피해야 할 음식"
                    description: "매운 음식"
                cardInfo:
                  image: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
                  title: "최고의 날"
                  subTitle: "네잎클로버"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/users/{userId}/add-july-history:
    post:
      summary: "Add July Past Routine History"
      description: "Add past routine history for July with predefined mission completion status. This API can only be called once per user."
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "201":
          description: "July history added successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AddJulyHistoryResponse"
              example:
                userId: "507f1f77bcf86cd799439011"
                year: 2024
                month: 7
                addedDays: 11
                totalSavedMoney: "350.00"
        "409":
          description: "July history already exists for this user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 409
                message: "Conflict - July history already exists"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 404
                message: "User not found"

  /api/mission-categories:
    get:
      summary: "Get Mission Categories"
      description: "Get all available mission categories with their names and image URLs (excludes SELF_REFLECTION)"
      responses:
        "200":
          description: "Mission categories retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MissionCategoriesResponse"
              example:
                categories:
                  - name: "TRANSPORTATION"
                    displayName: "이동·교통"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/transportation.png"
                  - name: "FOOD"
                    displayName: "식음료"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/food.png"
                  - name: "DIGITAL"
                    displayName: "디지털·구독"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/digital.png"
                  - name: "SHOPPING"
                    displayName: "쇼핑"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/shopping.png"
                  - name: "TRAVEL"
                    displayName: "취미·문화"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/travel.png"
                  - name: "SOCIAL"
                    displayName: "사교·모임"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/social.png"

  /api/love-test:
    post:
      summary: "Love Compatibility Test"
      description: "Calculate love compatibility score between two people based on their birth information"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoveTestRequest"
            example:
              me:
                gender: "MALE"
                name: "홍길동"
                birthDate:
                  date: "1995-05-15"
                  calendarType: "SOLAR"
                birthTime: "14:30:00"
              you:
                gender: "FEMALE"
                name: "김영희"
                birthDate:
                  date: "1997-08-20"
                  calendarType: "SOLAR"
                birthTime: "09:00:00"
                additional: "추가 정보"
              loveDate: "2024-01-15"
      responses:
        "200":
          description: "Love compatibility test result"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoveTestViewResponse"
              example:
                score: 85
                fortuneDetail: "궁합운 설명"
                fortuneCard:
                  image: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
                  title: "궁합운"
                  subTitle: "결혼까지 꿈꿔볼 수 있을 것 같아요 놓치기전에 먼저 고백해보세요!"
                fortuneTips:
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/jinxed-color.svg"
                    title: "피해야 할 색상"
                    description: "흰색"
                    hexColor: "#ffffff"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/jinxed-menu.svg"
                    title: "이 음식은 조심해!"
                    description: "치킨, 닭"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/today-menu.svg"
                    title: "행운의 메뉴"
                    description: "카레"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/lucky-color.svg"
                    title: "행운의 색상"
                    description: "연두색"
                    hexColor: "#81c147"
                confessDate: "2026-10-04"
                confessLocation: "학교 근처 놀이터에서"
        "400":
          description: "Bad request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /view/users/{userId}/home:
    get:
      summary: "Get Home View"
      description: "Get user's home view with long-term mission, today's daily missions, and today's fortune. The 'point' field shows yesterday's earned points with multiplier applied (2x if yesterday's daily mission failed, 4x if absent for 2+ days)."
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "Home view data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HomeViewResponse"
              example:
                longTermMission:
                  missionId: "507f1f77bcf86cd799439033"
                  category: "취미·문화"
                  difficulty: 5
                  type: "LONG_TERM"
                  finished: false
                  cost: "100.00"
                  endDate: "2024-12-31"
                  title: "여행 가기 위해 돈 모으기"
                  switchCount: 0
                todayDailyMissionList:
                  - missionId: "507f1f77bcf86cd799439066"
                    category: "사교·모임"
                    difficulty: 2
                    type: "LOVE"
                    finished: false
                    cost: "0.00"
                    endDate: "2024-01-15"
                    title: "상대방에게 좋아하는 점 3가지 말하기"
                    switchCount: 0
                    dayNumber: 1
                    remainingDays: 13
                  - missionId: "507f1f77bcf86cd799439044"
                    category: "식음료"
                    difficulty: 2
                    type: "DAILY"
                    finished: false
                    cost: "15.00"
                    endDate: "2024-01-15"
                    title: "점심 도시락 싸가기"
                    switchCount: 1
                  - missionId: "507f1f77bcf86cd799439055"
                    category: "이동·교통"
                    difficulty: 1
                    type: "DAILY"
                    finished: true
                    cost: "5.00"
                    endDate: "2024-01-15"
                    title: "대중교통 이용하기"
                    switchCount: 0
                todayDailyFortune:
                  date: "2024-01-15"
                  fortuneTitle: "좋은 하루"
                  positiveScore: 75
                  negativeScore: 25
                  totalScore: 50
                  fortuneCardImage: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
                  fortuneCardTitle: "네잎클로버"
                  fortuneCardSubTitle: "최고의 날"
                todayDone: false
                yesterdayMissionSuccess: true
                longAbsence: false
                isFirstAccess: false
                point: 150
                testBanner:
                  version: 1
                  title: "궁합 테스트에 참여하고\n스페셜 미션 받아보세요"
                  subTitle: "지금까지 389명이 참여했어요!"
                  imageUrl: null
                  testUrl: null

  /view/users/{userId}/myPage:
    get:
      summary: "Get My Page View"
      description: "Get user's profile information with animal card"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "My page data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MyPageResponse"
              example:
                animalCard:
                  name: "봄의 흰 말"
                  cardImageUrl: ""
                birthDate:
                  date: "2000-01-01"
                  calendarType: "SOLAR"
                birthTime: "09:30:00"
                preferredMissionCategoryList:
                  - name: "FOOD"
                    displayName: "식음료"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/food.png"
                  - name: "TRANSPORTATION"
                    displayName: "이동·교통"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/transportation.png"
                alarm: true
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /view/users/{userId}/analysis:
    get:
      summary: "Get Analysis View"
      description: "Get user's spending analysis and mission completion statistics with generation comparison data"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "Analysis data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AnalysisViewResponse"
              example:
                totalSavedMoney: "1250.00"
                weeklySavedMoney: "85.50"
                monthlySpendMoney: "320.00"
                generationMoneyViewResponse:
                  generation: "TWENTIES"
                  gender: "MALE"
                  averageSpendMoney: "70400.00"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /view/users/{userId}/calendar:
    get:
      summary: "Get Calendar View"
      description: "Get user's calendar view with three months of mission completion data based on the specified year-month"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
        - name: yearMonth
          in: query
          required: false
          schema:
            type: string
            pattern: "^\\d{4}-\\d{2}$"
          description: "Base year-month in YYYY-MM format. If not provided, uses current year-month."
          example: "2024-01"
      responses:
        "200":
          description: "Calendar data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CalendarViewResponse"
              example:
                threeMonthViewResponse:
                  - month: 12
                    averageSucceedProbability: 70
                    calendarDayMissionViews:
                      - day: 30
                        date: "2023-12-30"
                        finishedMissionCount: 2
                        totalMissionCount: 3
                      - day: 31
                        date: "2023-12-31"
                        finishedMissionCount: 1
                        totalMissionCount: 2
                  - month: 1
                    averageSucceedProbability: 75
                    calendarDayMissionViews:
                      - day: 15
                        date: "2024-01-15"
                        finishedMissionCount: 2
                        totalMissionCount: 3
                      - day: 16
                        date: "2024-01-16"
                        finishedMissionCount: 3
                        totalMissionCount: 3
                  - month: 2
                    averageSucceedProbability: 80
                    calendarDayMissionViews:
                      - day: 1
                        date: "2024-02-01"
                        finishedMissionCount: 1
                        totalMissionCount: 2
                      - day: 2
                        date: "2024-02-02"
                        finishedMissionCount: 2
                        totalMissionCount: 2
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /view/users/{userId}/reward-progress:
    get:
      summary: "Get Reward Progress View"
      description: "Get user's reward progress information including reward level and available rewards"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "Reward progress data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RewardProgressViewResponse"
              example:
                user:
                  rewardImageUrl: "https://picsum.photos/250/250"
                  rewardLevel: "LV3"
                  totalPoint: 350
                  currentLevelPoint: 100
                  nextLevelRequiredPoint: 150
                rewardList:
                  - id: 1
                    title: "1년 운세"
                    isUnlocked: false
                    isUsed: false
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/users/{userId}/yearly-fortune:
    post:
      summary: "Create Yearly Fortune"
      description: "Generate a yearly fortune for the user using Gemini AI. Requires level 8 or higher. Can only be used once per user."
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "201":
          description: "Yearly fortune created successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateYearlyFortuneResponse"
              example:
                success: true
        "400":
          description: "Yearly fortune already used"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 2006
                message: "이미 1년 운세를 사용했습니다"
        "403":
          description: "Level not enough (level 8 required)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 2005
                message: "레벨이 부족합니다 (레벨 8 이상 필요)"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /view/users/{userId}/yearly-fortune:
    get:
      summary: "Get Yearly Fortune"
      description: "Retrieve the user's generated yearly fortune. Returns 404 if yearly fortune has not been generated yet."
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "Yearly fortune retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/YearlyFortuneResponse"
              example:
                year: 2025
                generatedDate: "2025-01-15"
                totalScore: 79
                summaryTitle: "도약의 해"
                summaryDetail: "올해는 새로운 시작과 도전이 가득한 한 해가 될 것입니다."
                fortuneOverview:
                  money:
                    title: "금전운"
                    description: "재물 운이 상승하는 시기입니다."
                    image: "https://objectstorage.ap-chuncheon-1.oraclecloud.com/n/axircf8nexkb/b/dhc-storage/o/logos/fortune/svg/money.svg"
                  love:
                    title: "연애운"
                    description: "좋은 인연을 만날 수 있는 해입니다."
                    image: "https://objectstorage.ap-chuncheon-1.oraclecloud.com/n/axircf8nexkb/b/dhc-storage/o/logos/fortune/svg/love.svg"
                  study:
                    title: "학업운"
                    description: "집중력이 높아지는 시기입니다."
                    image: "https://objectstorage.ap-chuncheon-1.oraclecloud.com/n/axircf8nexkb/b/dhc-storage/o/logos/fortune/svg/study.svg"
                fiveElements:
                  dominantElement: "화"
                  dominantWarning: "화기운이 강하니 급한 마음을 다스리세요"
                  wood:
                    percentage: 15
                    status: "부족"
                  fire:
                    percentage: 35
                    status: "과다"
                  earth:
                    percentage: 20
                    status: "적정"
                  metal:
                    percentage: 15
                    status: "부족"
                  water:
                    percentage: 15
                    status: "부족"
                yearlyEnergyTitle: "상반기 집중"
                yearlyEnergyDetail: "상반기에 에너지가 집중되니 중요한 일은 상반기에 진행하세요."
                tips:
                  - image: "https://objectstorage.ap-chuncheon-1.oraclecloud.com/n/axircf8nexkb/b/dhc-storage/o/logos/fortune/svg/todayMenu.svg"
                    title: "행운의 메뉴"
                    description: "삼계탕"
                  - image: "https://objectstorage.ap-chuncheon-1.oraclecloud.com/n/axircf8nexkb/b/dhc-storage/o/logos/fortune/svg/luckyColor.svg"
                    title: "행운의 색상"
                    description: "파란색"
                    hexColor: "#0066CC"
                  - image: "https://objectstorage.ap-chuncheon-1.oraclecloud.com/n/axircf8nexkb/b/dhc-storage/o/logos/fortune/svg/jinxedColor.svg"
                    title: "피해야 할 색상"
                    description: "빨간색"
                    hexColor: "#FF0000"
                  - image: "https://objectstorage.ap-chuncheon-1.oraclecloud.com/n/axircf8nexkb/b/dhc-storage/o/logos/fortune/svg/jinxedMenu.svg"
                    title: "피해야 할 음식"
                    description: "매운 음식"
        "404":
          description: "User not found or yearly fortune not generated"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/storage/upload:
    post:
      summary: "Upload File"
      description: "Upload a file to storage"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: "File to upload"
                displayLogo:
                  type: string
                  description: "Display logo identifier"
                  example: "company-logo"
      responses:
        "200":
          description: "File uploaded successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadResponse"
              example:
                url: "https://storage.example.com/uploads/file.jpg"
        "400":
          description: "Bad request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 400
                message: "파일이 없습니다"

  /api/storage/{key}:
    delete:
      summary: "Delete File"
      description: "Delete a file from storage"
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
          description: "File key to delete"
          example: "uploads/file.jpg"
      responses:
        "204":
          description: "File deleted successfully"
        "400":
          description: "Bad request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 400
                message: "키가 필요합니다"

  /api/storage/url/{key}:
    get:
      summary: "Get File URL"
      description: "Get the URL of a file in storage"
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
          description: "File key"
          example: "uploads/file.jpg"
      responses:
        "200":
          description: "File URL retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadResponse"
              example:
                url: "https://storage.example.com/uploads/file.jpg"
        "400":
          description: "Bad request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 400
                message: "키가 필요합니다"

  /api/users/{userId}/share:
    post:
      summary: "Create Share Code"
      description: "Generate a unique share code for the user. If a share code already exists for the user, returns the existing code."
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "Share code created or retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateShareCodeResponse"
              example:
                shareCode: "abc123def456"
                isNew: true
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 404
                message: "User not found"

  /api/share/{shareCode}/complete:
    post:
      summary: "Complete Share"
      description: "Mark a share as completed when someone accesses the shared link. This triggers love mission activation for the share owner on their next home API call."
      parameters:
        - name: shareCode
          in: path
          required: true
          schema:
            type: string
          description: "Share code from the shared link"
          example: "abc123def456"
      responses:
        "200":
          description: "Share completed successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CompleteShareResponse"
              example:
                success: true
                message: "Share completed successfully"
        "404":
          description: "Share not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 404
                message: "Share not found"

  /api/qa/users/{userId}/home-state:
    put:
      tags:
        - QA
      summary: "[QA] 홈 화면 상태 오버라이드"
      description: |
        **QA 테스트 전용 API** - 홈 화면(`/view/users/{userId}/home`)의 `longAbsence`, `yesterdayMissionSuccess`, `todayDone` 값을 강제로 설정합니다.

        이 3개 값은 원래 서버에서 매번 계산되는 값이므로, 이 API로 오버라이드를 설정하면 계산 결과 대신 오버라이드 값이 반환됩니다.

        ### 사용 시나리오
ㅡ다음         - **2일 이상 미접속 화면 테스트**: `longAbsence: true` 설정
        - **어제 미션 성공 후 홈 화면 테스트**: `yesterdayMissionSuccess: true` 설정
        - **오늘 미션 완료 후 화면 테스트**: `todayDone: true` 설정
        - **조합 테스트**: 여러 값을 동시에 설정 가능

        ### 오버라이드 해제
        각 필드를 `null`로 보내면 오버라이드가 해제되고 원래 계산 로직으로 복원됩니다.
        ```json
        { "longAbsence": null, "yesterdayMissionSuccess": null, "todayDone": null }
        ```

        ### 주의사항
        - 오버라이드는 해당 유저에게 영구적으로 적용됩니다 (해제할 때까지)
        - QA 테스트 완료 후 반드시 `null`로 초기화하세요
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QaHomeStateRequest"
            examples:
              long_absence_true:
                summary: "2일 이상 미접속 상태로 설정"
                value:
                  longAbsence: true
                  yesterdayMissionSuccess: null
                  todayDone: null
              all_true:
                summary: "모든 값 true로 설정"
                value:
                  longAbsence: true
                  yesterdayMissionSuccess: true
                  todayDone: true
              reset_all:
                summary: "모든 오버라이드 해제 (원래 계산 로직 복원)"
                value:
                  longAbsence: null
                  yesterdayMissionSuccess: null
                  todayDone: null
      responses:
        "200":
          description: "오버라이드 설정 완료"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QaSuccessResponse"
              example:
                success: true
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/qa/users/{userId}/point:
    put:
      tags:
        - QA
      summary: "[QA] 포인트(레벨) 조정"
      description: |
        **QA 테스트 전용 API** - 유저의 총 포인트를 입력한 정확한 수치로 설정합니다.
        포인트에 따라 레벨이 자동으로 결정됩니다.

        ### 레벨별 필요 포인트
        | 레벨 | 이름 | 필요 포인트 |
        |------|------|------------|
        | LV1 | 새싹 복주머니 | 0 |
        | LV2 | 흙 복주머니 | 100 |
        | LV3 | 돌 복주머니 | 250 |
        | LV4 | 동 복주머니 | 400 |
        | LV5 | 은 복주머니 | 600 |
        | LV6 | 금 복주머니 | 800 |
        | LV7 | 백금 복주머니 | 1000 |
        | **LV8** | **다이아 복주머니** | **1300** |
        | LV9 | 루비 복주머니 | 1700 |
        | LV10 | 프리미엄 복주머니 | 2200 |

        ### 연간 운세 해금
        **LV8 (1300pt) 이상**부터 연간 운세(`POST /api/users/{userId}/yearly-fortune`) 사용이 가능합니다.

        ### 사용 시나리오
        - **레벨 8 테스트**: `point: 1300` → LV8 달성, 연간 운세 해금
        - **최고 레벨 테스트**: `point: 2200` → LV10
        - **초기 상태 복원**: `point: 0` → LV1
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QaPointRequest"
            examples:
              level_8:
                summary: "LV8 달성 (연간 운세 해금)"
                value:
                  point: 1300
              level_10:
                summary: "LV10 최고 레벨"
                value:
                  point: 2200
              reset:
                summary: "포인트 초기화 (LV1)"
                value:
                  point: 0
      responses:
        "200":
          description: "포인트 설정 완료"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QaPointResponse"
              example:
                success: true
                point: 1300
                level: 8
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/qa/users/{userId}/yearly-fortune:
    delete:
      tags:
        - QA
      summary: "[QA] 연간 운세 사용 내역 삭제"
      description: |
        **QA 테스트 전용 API** - 유저의 연간 운세 사용 기록을 삭제하여 다시 사용할 수 있도록 원복합니다.

        이 API를 호출하면:
        - `yearlyFortuneUsed` → `false`로 변경
        - `yearlyFortune` → `null`로 삭제

        ### 사용 시나리오
        1. 포인트 API로 LV8 이상 설정 (`PUT /api/qa/users/{userId}/point` → `{ "point": 1300 }`)
        2. 연간 운세 생성 (`POST /api/users/{userId}/yearly-fortune`)
        3. 연간 운세 확인 (`GET /view/users/{userId}/yearly-fortune`)
        4. **이 API로 원복** (`DELETE /api/qa/users/{userId}/yearly-fortune`)
        5. 다시 2번부터 반복 테스트 가능

        ### 주의사항
        - 이 API는 `yearlyFortuneUsed` 플래그만 리셋합니다. 포인트/레벨은 별도로 관리하세요.
        - 연간 운세 재생성 시 Gemini API가 다시 호출되므로 다른 결과가 나올 수 있습니다.
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "연간 운세 사용 내역 삭제 완료"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QaSuccessResponse"
              example:
                success: true
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

components:
  schemas:
    RegisterUserRequest:
      type: object
      required:
        - userToken
        - gender
        - preferredMissionCategoryList
      properties:
        userToken:
          type: string
          description: "Unique token for the user"
          example: "user123token"
        gender:
          $ref: "#/components/schemas/Gender"
        birthDate:
          $ref: "#/components/schemas/BirthDate"
        birthTime:
          type: string
          format: time
          description: "Birth time in HH:mm:ss format"
          example: "09:30:00"
          nullable: true
        preferredMissionCategoryList:
          type: array
          items:
            $ref: "#/components/schemas/MissionCategory"
          description: "List of preferred mission categories"
          example: [ "FOOD", "TRANSPORTATION" ]

    RegisterUserResponse:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: "Generated user ID"
          example: "507f1f77bcf86cd799439011"

    SearchUserResponse:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"

    ToggleMissionRequest:
      type: object
      properties:
        finished:
          type: boolean
          description: "Whether the mission is completed"
          example: true
          nullable: true
        switch:
          type: boolean
          description: "Whether to switch the mission"
          example: false
          nullable: true

    ToggleMissionResponse:
      type: object
      required:
        - missions
      properties:
        missions:
          type: array
          items:
            $ref: "#/components/schemas/Mission"
          description: "List of missions (today's daily missions and long-term mission if exists)"

    EndTodayMissionRequest:
      type: object
      required:
        - date
      properties:
        date:
          type: string
          format: date
          description: "Date in YYYY-MM-DD format"
          example: "2024-01-15"

    EndTodayMissionResponse:
      type: object
      required:
        - todaySavedMoney
        - missionSuccess
        - earnedPoint
      properties:
        todaySavedMoney:
          type: string
          description: "Total money saved today (Money type as string)"
          example: "25.50"
        missionSuccess:
          type: boolean
          description: "Whether at least one mission was completed successfully"
          example: true
        earnedPoint:
          type: integer
          format: int64
          description: "Points earned from completed missions with multiplier applied. Base points: Easy(1)=50pt, Medium(2)=100pt, Hard(3+)=200pt. Multipliers: 2x if yesterday's daily mission failed, 4x if absent for 2+ days."
          example: 150

    AddJulyHistoryResponse:
      type: object
      required:
        - userId
        - year
        - month
        - addedDays
        - totalSavedMoney
      properties:
        userId:
          type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
        year:
          type: integer
          description: "Year of the added history"
          example: 2024
        month:
          type: integer
          description: "Month of the added history (always 7 for July)"
          example: 7
        addedDays:
          type: integer
          description: "Number of days with history added"
          example: 11
        totalSavedMoney:
          type: string
          description: "Total money saved from all added missions (Money type as string)"
          example: "350.00"

    HomeViewResponse:
      type: object
      properties:
        longTermMission:
          $ref: "#/components/schemas/Mission"
          nullable: true
        todayDailyMissionList:
          type: array
          items:
            $ref: "#/components/schemas/Mission"
          description: "todayDone=false: 오늘의 미션 (러브미션 포함 시 맨 앞에 추가). todayDone=true: 오늘 완료한 미션(PastRoutineHistory)을 finished 상태 그대로 반환."
        todayDailyFortune:
          $ref: "#/components/schemas/FortuneResponse"
          nullable: true
        todayDone:
          type: boolean
          description: "오늘 미션 완료 여부. true이면 todayDailyMissionList와 longTermMission이 완료한 미션(PastRoutineHistory)으로 반환됨"
          example: false
        yesterdayMissionSuccess:
          type: boolean
          description: "Whether user completed any daily missions yesterday (DAILY type only)"
          example: true
        longAbsence:
          type: boolean
          description: "Whether user has been absent for 2 or more days"
          example: false
        isFirstAccess:
          type: boolean
          description: "가입 첫날 여부 (유저 생성일 == 오늘). 첫날이면 yesterdayMissionSuccess가 false여도 어제 미션 기회가 없었음을 의미"
          example: false
        point:
          type: integer
          format: int64
          description: "Points earned from yesterday's completed missions with multiplier applied. Base points: Easy(1)=50pt, Medium(2)=100pt, Hard(3+)=200pt. Multipliers: 2x if yesterday's daily mission failed, 4x if absent for 2+ days."
          example: 150
        testBanner:
          $ref: "#/components/schemas/TestBannerResponse"
          nullable: true
          description: "Test banner information for compatibility test promotion"

    TestBannerResponse:
      type: object
      required:
        - version
        - title
        - subTitle
      properties:
        version:
          type: integer
          description: "Banner version number. Client can use this to detect content changes and reset dismissed state."
          example: 1
        title:
          type: string
          description: "Banner title text"
          example: "궁합 테스트에 참여하고\n스페셜 미션 받아보세요"
        subTitle:
          type: string
          description: "Banner subtitle text"
          example: "지금까지 389명이 참여했어요!"
        imageUrl:
          type: string
          description: "URL of the banner graphic image"
          example: "https://example.com/banner.png"
          nullable: true
        testUrl:
          type: string
          description: "URL to navigate when clicking the test button"
          example: "https://example.com/love-test"
          nullable: true

    MissionCategoriesResponse:
      type: object
      required:
        - categories
      properties:
        categories:
          type: array
          items:
            $ref: "#/components/schemas/MissionCategoryResponse"
          description: "List of all available mission categories (excludes SELF_REFLECTION)"

    MissionCategoryResponse:
      type: object
      required:
        - name
        - displayName
        - imageUrl
      properties:
        name:
          type: string
          description: "Mission category name (enum value)"
          example: "FOOD"
        displayName:
          type: string
          description: "Mission category display name in Korean"
          example: "식음료"
        imageUrl:
          type: string
          description: "URL of the category image"
          example: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/food.png"

    MyPageResponse:
      type: object
      required:
        - animalCard
        - birthDate
        - preferredMissionCategoryList
        - alarm
      properties:
        animalCard:
          $ref: "#/components/schemas/AnimalCard"
        birthDate:
          $ref: "#/components/schemas/BirthDate"
        birthTime:
          type: string
          format: time
          description: "Birth time in HH:mm:ss format"
          example: "09:30:00"
          nullable: true
        preferredMissionCategoryList:
          type: array
          items:
            $ref: "#/components/schemas/MissionCategoryResponse"
          description: "List of preferred mission categories with image URLs"
        alarm:
          type: boolean
          description: "Whether alarm is enabled (hardcoded to true)"
          example: true

    AnalysisViewResponse:
      type: object
      required:
        - totalSavedMoney
        - weeklySavedMoney
        - monthlySpendMoney
        - generationMoneyViewResponse
      properties:
        totalSavedMoney:
          type: string
          description: "Total amount of money saved (Money type as string)"
          example: "1250.00"
        weeklySavedMoney:
          type: string
          description: "Amount of money saved this week (Money type as string)"
          example: "85.50"
        monthlySpendMoney:
          type: string
          description: "Amount of money spent this month (Money type as string)"
          example: "320.00"
        generationMoneyViewResponse:
          $ref: "#/components/schemas/GenerationMoneyViewResponse"
          description: "Generation-based spending comparison data"

    AnalysisMonthViewResponse:
      type: object
      required:
        - month
        - averageSucceedProbability
        - calendarDayMissionViews
      properties:
        month:
          type: integer
          minimum: 1
          maximum: 12
          description: "Month number (1-12)"
          example: 1
        averageSucceedProbability:
          type: integer
          description: "Average success probability as percentage for this month"
          example: 75
        calendarDayMissionViews:
          type: array
          items:
            $ref: "#/components/schemas/CalendarDayMissionView"
          description: "Calendar view of daily missions for this month"

    AnimalCard:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: "Animal card name (generated from birth date: season + color + animal)"
          example: "봄의 흰 말"
        cardImageUrl:
          type: string
          description: "URL of the animal card image (currently empty string)"
          example: ""
          nullable: true

    Mission:
      type: object
      required:
        - missionId
        - category
        - difficulty
        - type
        - finished
        - cost
        - endDate
        - title
        - switchCount
      properties:
        missionId:
          type: string
          description: "Mission ID"
          example: "507f1f77bcf86cd799439022"
        category:
          type: string
          description: "Mission category display name in Korean"
          example: "식음료"
        difficulty:
          type: integer
          minimum: 1
          maximum: 5
          description: "Mission difficulty level (1=Easy: 50pt, 2=Medium: 100pt, 3+=Hard: 200pt)"
          example: 3
        type:
          $ref: "#/components/schemas/MissionType"
        finished:
          type: boolean
          description: "Whether the mission is completed"
          example: false
        cost:
          type: string
          description: "Mission cost/reward amount (Money type as string)"
          example: "10.00"
        endDate:
          type: string
          format: date
          description: "Mission end date in YYYY-MM-DD format"
          example: "2024-12-31"
          nullable: true
        title:
          type: string
          description: "Mission title"
          example: "오늘 점심은 집에서 해먹기"
        switchCount:
          type: integer
          description: "Number of times mission has been switched"
          example: 0
        dayNumber:
          type: integer
          minimum: 1
          maximum: 14
          description: "Love mission day number (1-14). Only present for LOVE type missions."
          example: 1
          nullable: true
        remainingDays:
          type: integer
          description: "Number of remaining days for love mission. Only present for LOVE type missions."
          example: 13
          nullable: true

    DailyFortune:
      type: object
      required:
        - date
        - fortuneTitle
        - fortuneDetail
        - jinxedColor
        - jinxedColorHex
        - jinxedMenu
        - jinxedNumber
        - luckyColor
        - luckyColorHex
        - luckyNumber
        - score
        - todayMenu
      properties:
        date:
          type: string
          description: "Fortune date in YYYY-MM-DD format"
          example: "2024-01-15"
        fortuneTitle:
          type: string
          description: "Fortune title"
          example: "좋은 하루"
        fortuneDetail:
          type: string
          description: "Detailed fortune description"
          example: "오늘은 좋은 일이 생길 것입니다"
        jinxedColor:
          type: string
          description: "Unlucky color name"
          example: "빨간색"
        jinxedColorHex:
          type: string
          description: "Unlucky color hex code"
          example: "#FF0000"
        jinxedMenu:
          type: string
          description: "Food to avoid today"
          example: "매운 음식"
        jinxedNumber:
          type: integer
          description: "Unlucky number"
          example: 4
        luckyColor:
          type: string
          description: "Lucky color name"
          example: "파란색"
        luckyColorHex:
          type: string
          description: "Lucky color hex code"
          example: "#0000FF"
        luckyNumber:
          type: integer
          description: "Lucky number"
          example: 7
        score:
          type: integer
          minimum: 0
          maximum: 100
          description: "Fortune score (used in home view)"
          example: 85
        todayMenu:
          type: string
          description: "Recommended food for today"
          example: "샐러드"

    Gender:
      type: string
      enum:
        - MALE
        - FEMALE
      description: "User gender"
      example: "MALE"

    BirthDate:
      type: object
      required:
        - date
        - calendarType
      properties:
        date:
          type: string
          format: date
          description: "Birth date in YYYY-MM-DD format"
          example: "2000-01-01"
        calendarType:
          $ref: "#/components/schemas/CalendarType"
      nullable: true

    CalendarType:
      type: string
      enum:
        - SOLAR
        - LUNAR
      description: "Calendar type for birth date"
      example: "SOLAR"

    MissionCategory:
      type: string
      enum:
        - TRANSPORTATION
        - FOOD
        - DIGITAL
        - SHOPPING
        - TRAVEL
        - SOCIAL
        - SELF_REFLECTION
      description: "Mission category (SELF_REFLECTION is excluded from mission-categories endpoint)"
      example: "FOOD"

    MissionType:
      type: string
      enum:
        - LONG_TERM
        - DAILY
        - LOVE
      description: "Mission type. LOVE missions appear at the top of todayDailyMissionList and have additional dayNumber, remainingDays fields."
      example: "DAILY"

    UploadResponse:
      type: object
      required:
        - url
      properties:
        url:
          type: string
          description: "URL of the uploaded file"
          example: "https://storage.example.com/uploads/file.jpg"

    ErrorResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
          description: "Error code"
          example: 404
        message:
          type: string
          description: "Error message"
          example: "User not found"
        details:
          type: string
          description: "Additional error details"
          nullable: true

    ValidationErrorResponse:
      type: object
      required:
        - code
        - message
        - validationErrors
      properties:
        code:
          type: integer
          description: "Validation error code"
          example: 400
        message:
          type: string
          description: "Validation error message"
          example: "Validation failed"
        validationErrors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorDetail"
          description: "List of validation errors"

    ErrorDetail:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
          description: "Specific error code"
          example: 1001
        message:
          type: string
          description: "Specific error message"
          example: "Invalid field value"

    CalendarDayMissionView:
      type: object
      required:
        - day
        - date
        - finishedMissionCount
        - totalMissionCount
      properties:
        day:
          type: integer
          description: "Day of the month"
          example: 15
        date:
          type: string
          format: date
          description: "Date in YYYY-MM-DD format"
          example: "2024-01-15"
        finishedMissionCount:
          type: integer
          description: "Number of finished missions for this day"
          example: 2
        totalMissionCount:
          type: integer
          description: "Total number of missions for this day"
          example: 3

    CalendarViewResponse:
      type: object
      required:
        - threeMonthViewResponse
      properties:
        threeMonthViewResponse:
          type: array
          items:
            $ref: "#/components/schemas/AnalysisMonthViewResponse"
          description: "Calendar data for three months (previous, current, next)"

    GenerationMoneyViewResponse:
      type: object
      required:
        - generation
        - gender
        - averageSpendMoney
      properties:
        generation:
          $ref: "#/components/schemas/Generation"
        gender:
          $ref: "#/components/schemas/Gender"
        averageSpendMoney:
          type: string
          description: "Average spending money for this generation and gender (Money type as string)"
          example: "70400.00"

    Generation:
      type: string
      enum:
        - TEENAGERS
        - TWENTIES
        - THIRTIES
        - FORTIES
        - UNKNOWN
      description: "User generation based on age"
      example: "TWENTIES"

    FortuneColor:
      type: string
      enum:
        - RED
        - YELLOW
        - GREEN
        - WHITE
        - BLACK
      description: "Fortune color type"
      example: "RED"

    FortuneResponse:
      type: object
      required:
        - date
        - fortuneTitle
        - positiveScore
        - negativeScore
        - totalScore
        - fortuneCardImage
        - fortuneCardTitle
        - fortuneCardSubTitle
      properties:
        date:
          type: string
          description: "Fortune date in YYYY-MM-DD format"
          example: "2024-01-15"
        fortuneTitle:
          type: string
          description: "Fortune title"
          example: "좋은 하루"
        positiveScore:
          type: integer
          description: "Positive score"
          example: 80
        negativeScore:
          type: integer
          description: "Negative score"
          example: 20
        totalScore:
          type: integer
          description: "Total score"
          example: 60
        fortuneCardImage:
          type: string
          example: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
        fortuneCardTitle:
          type: string
          example: "네잎클로버"
        fortuneCardSubTitle:
          type: string
          example: "최고의 날"

    DailyFortuneResponse:
      type: object
      required:
        - date
        - fortuneTitle
        - fortuneDetail
        - totalScore
        - positiveScore
        - negativeScore
        - tips
        - cardInfo
      properties:
        date:
          type: string
          description: "Fortune date in YYYY-MM-DD format"
          example: "2024-01-15"
        fortuneTitle:
          type: string
          description: "Fortune title"
          example: "좋은 하루"
        fortuneDetail:
          type: string
          description: "Detailed fortune description"
          example: "오늘은 좋은 일이 생길 것입니다"
        totalScore:
          type: integer
          description: "Total fortune score"
          example: 60
        positiveScore:
          type: integer
          description: "Positive score"
          example: 80
        negativeScore:
          type: integer
          description: "Negative score"
          example: 20
        tips:
          type: array
          items:
            $ref: "#/components/schemas/FortuneTip"
          description: "List of fortune tips (today's menu, lucky color, jinxed color, jinxed menu)"
        cardInfo:
          $ref: "#/components/schemas/FortuneCard"
          description: "Fortune card information"

    FortuneTip:
      type: object
      required:
        - image
        - title
        - description
      properties:
        image:
          type: string
          description: "URL of the tip image"
          example: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/today-menu.png"
        title:
          type: string
          description: "Tip title"
          example: "오늘의 추천메뉴"
        description:
          type: string
          description: "Tip description"
          example: "샐러드"
        hexColor:
          type: string
          description: "Hex color code (only for color-related tips)"
          example: "#0000FF"
          nullable: true

    FortuneCard:
      type: object
      required:
        - image
        - title
        - subTitle
      properties:
        image:
          type: string
          description: "URL of the fortune card image"
          example: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
        title:
          type: string
          description: "Fortune card title"
          example: "최고의 날"
        subTitle:
          type: string
          description: "Fortune card subtitle"
          example: "네잎클로버"

    RewardProgressViewResponse:
      type: object
      required:
        - user
        - rewardList
      properties:
        user:
          $ref: "#/components/schemas/RewardUserResponse"
          description: "User reward information"
        rewardList:
          type: array
          items:
            $ref: "#/components/schemas/RewardItemResponse"
          description: "List of available rewards"

    RewardUserResponse:
      type: object
      required:
        - rewardImageUrl
        - rewardLevel
        - totalPoint
        - currentLevelPoint
      properties:
        rewardImageUrl:
          type: string
          description: "URL of the reward image"
          example: ""
        rewardLevel:
          $ref: "#/components/schemas/RewardLevel"
          description: "Current reward level"
        totalPoint:
          type: integer
          format: int64
          description: "Total accumulated points"
          example: 350
        currentLevelPoint:
          type: integer
          format: int64
          description: "Points earned within current level (from current level threshold)"
          example: 100
        nextLevelRequiredPoint:
          type: integer
          format: int64
          description: "Points needed to reach next level from current level threshold. Null if max level."
          example: 150
          nullable: true

    RewardItemResponse:
      type: object
      required:
        - id
        - title
        - isUnlocked
        - isUsed
      properties:
        id:
          type: integer
          format: int64
          description: "Reward ID"
          example: 1
        title:
          type: string
          description: "Reward title"
          example: "1년 운세"
        isUnlocked:
          type: boolean
          description: "Whether the reward is unlocked (level 8+ required)"
          example: false
        isUsed:
          type: boolean
          description: "Whether the reward has been used (one-time use)"
          example: false

    RewardLevel:
      type: string
      enum:
        - LV1
        - LV2
        - LV3
        - LV4
        - LV5
        - LV6
        - LV7
        - LV8
        - LV9
        - LV10
      description: "Reward level (LV1: 새싹 0pt, LV2: 흙 100pt, LV3: 돌 250pt, LV4: 동 400pt, LV5: 은 600pt, LV6: 금 800pt, LV7: 백금 1000pt, LV8: 다이아 1300pt, LV9: 루비 1700pt, LV10: 프리미엄 2200pt)"
      example: "LV1"

    LoveTestRequest:
      type: object
      required:
        - me
        - you
        - loveDate
      properties:
        me:
          $ref: "#/components/schemas/LoveTestMe"
          description: "My information"
        you:
          $ref: "#/components/schemas/LoveTestYou"
          description: "Partner's information"
        loveDate:
          type: string
          format: date
          description: "Date for love compatibility test in YYYY-MM-DD format"
          example: "2024-01-15"

    LoveTestMe:
      type: object
      required:
        - gender
        - name
        - birthDate
      properties:
        gender:
          $ref: "#/components/schemas/Gender"
        name:
          type: string
          description: "My name"
          example: "홍길동"
        birthDate:
          $ref: "#/components/schemas/BirthDate"
        birthTime:
          type: string
          format: time
          description: "Birth time in HH:mm:ss format"
          example: "14:30:00"
          nullable: true

    LoveTestYou:
      type: object
      required:
        - gender
        - name
      properties:
        gender:
          $ref: "#/components/schemas/Gender"
        name:
          type: string
          description: "Partner's name"
          example: "김영희"
        birthDate:
          $ref: "#/components/schemas/BirthDate"
          nullable: true
        birthTime:
          type: string
          format: time
          description: "Birth time in HH:mm:ss format"
          example: "09:00:00"
          nullable: true
        additional:
          type: string
          description: "Additional information about partner"
          example: "추가 정보"
          nullable: true

    LoveTestViewResponse:
      type: object
      required:
        - score
        - fortuneDetail
        - fortuneCard
        - fortuneTips
        - confessDate
        - confessLocation
      properties:
        score:
          type: integer
          description: "Love compatibility score (0-100)"
          example: 85
        fortuneDetail:
          type: string
          description: "Detailed fortune description for the couple"
          example: "궁합운 설명"
        fortuneCard:
          $ref: "#/components/schemas/FortuneCard"
          description: "Fortune card information"
        fortuneTips:
          type: array
          items:
            $ref: "#/components/schemas/FortuneTip"
          description: "List of fortune tips for the couple"
        confessDate:
          type: string
          format: date
          description: "Recommended confession date in YYYY-MM-DD format"
          example: "2026-10-04"
        confessLocation:
          type: string
          description: "Recommended confession location"
          example: "학교 근처 놀이터에서"

    CreateShareCodeResponse:
      type: object
      required:
        - shareCode
        - isNew
      properties:
        shareCode:
          type: string
          description: "Generated share code"
          example: "abc123def456"
        isNew:
          type: boolean
          description: "Whether a new share code was created (false if existing code was returned)"
          example: true

    CompleteShareResponse:
      type: object
      required:
        - success
      properties:
        success:
          type: boolean
          description: "Whether the share completion was successful"
          example: true
        message:
          type: string
          description: "Optional message"
          example: "Share completed successfully"
          nullable: true

    CreateYearlyFortuneResponse:
      type: object
      required:
        - success
      properties:
        success:
          type: boolean
          description: "Whether the yearly fortune was created successfully"
          example: true

    YearlyFortuneResponse:
      type: object
      required:
        - year
        - generatedDate
        - totalScore
        - summaryTitle
        - summaryDetail
        - fortuneOverview
        - fiveElements
        - yearlyEnergyTitle
        - yearlyEnergyDetail
        - tips
      properties:
        year:
          type: integer
          description: "Year of the fortune"
          example: 2025
        generatedDate:
          type: string
          description: "Date when the fortune was generated (YYYY-MM-DD)"
          example: "2025-01-15"
        totalScore:
          type: integer
          minimum: 0
          maximum: 100
          description: "Overall fortune score"
          example: 79
        summaryTitle:
          type: string
          description: "Summary title for the year"
          example: "도약의 해"
        summaryDetail:
          type: string
          description: "Detailed summary description"
          example: "올해는 새로운 시작과 도전이 가득한 한 해가 될 것입니다."
        fortuneOverview:
          $ref: "#/components/schemas/FortuneOverviewResponse"
          description: "Overview of fortune categories (money, love, study)"
        fiveElements:
          $ref: "#/components/schemas/FiveElementsResponse"
          description: "Five elements (오행) balance analysis"
        yearlyEnergyTitle:
          type: string
          description: "Title for yearly energy changes"
          example: "상반기 집중"
        yearlyEnergyDetail:
          type: string
          description: "Details about yearly energy changes"
          example: "상반기에 에너지가 집중되니 중요한 일은 상반기에 진행하세요."
        tips:
          type: array
          items:
            $ref: "#/components/schemas/FortuneTip"
          description: "List of fortune tips (행운의 메뉴, 행운의 색상, 피해야 할 색상, 피해야 할 음식)"

    FortuneOverviewResponse:
      type: object
      required:
        - money
        - love
        - study
      properties:
        money:
          $ref: "#/components/schemas/FortuneCategoryResponse"
          description: "Money/wealth fortune"
        love:
          $ref: "#/components/schemas/FortuneCategoryResponse"
          description: "Love/relationship fortune"
        study:
          $ref: "#/components/schemas/FortuneCategoryResponse"
          description: "Study/career fortune"

    FortuneCategoryResponse:
      type: object
      required:
        - title
        - description
        - image
      properties:
        title:
          type: string
          description: "Category title"
          example: "금전운"
        description:
          type: string
          description: "Category description"
          example: "재물 운이 상승하는 시기입니다."
        image:
          type: string
          description: "Category image URL"
          example: "https://objectstorage.ap-chuncheon-1.oraclecloud.com/n/axircf8nexkb/b/dhc-storage/o/logos/fortune/svg/money.svg"

    FiveElementsResponse:
      type: object
      required:
        - dominantElement
        - dominantWarning
        - wood
        - fire
        - earth
        - metal
        - water
      properties:
        dominantElement:
          type: string
          description: "Dominant element name"
          example: "화"
        dominantWarning:
          type: string
          description: "Warning message about the dominant element"
          example: "화기운이 강하니 급한 마음을 다스리세요"
        wood:
          $ref: "#/components/schemas/ElementBalanceResponse"
          description: "Wood (목) element balance"
        fire:
          $ref: "#/components/schemas/ElementBalanceResponse"
          description: "Fire (화) element balance"
        earth:
          $ref: "#/components/schemas/ElementBalanceResponse"
          description: "Earth (토) element balance"
        metal:
          $ref: "#/components/schemas/ElementBalanceResponse"
          description: "Metal (금) element balance"
        water:
          $ref: "#/components/schemas/ElementBalanceResponse"
          description: "Water (수) element balance"

    ElementBalanceResponse:
      type: object
      required:
        - percentage
        - status
      properties:
        percentage:
          type: integer
          minimum: 0
          maximum: 100
          description: "Percentage of this element"
          example: 20
        status:
          type: string
          enum:
            - "적정"
            - "과다"
            - "부족"
          description: "Balance status (적정=balanced, 과다=excess, 부족=deficient)"
          example: "적정"

    QaHomeStateRequest:
      type: object
      description: "홈 화면 상태 오버라이드 요청. null로 보내면 해당 오버라이드가 해제되어 원래 계산 로직으로 복원됩니다."
      properties:
        longAbsence:
          type: boolean
          description: "2일 이상 미접속 여부 오버라이드. null이면 오버라이드 해제."
          example: true
          nullable: true
        yesterdayMissionSuccess:
          type: boolean
          description: "어제 일일 미션 성공 여부 오버라이드. null이면 오버라이드 해제."
          example: false
          nullable: true
        todayDone:
          type: boolean
          description: "오늘 미션 완료 여부 오버라이드. null이면 오버라이드 해제."
          example: true
          nullable: true
        isFirstAccess:
          type: boolean
          description: "가입 첫날 여부 오버라이드. null이면 오버라이드 해제."
          example: true
          nullable: true

    QaPointRequest:
      type: object
      required:
        - point
      properties:
        point:
          type: integer
          format: int64
          minimum: 0
          description: "설정할 포인트 값. 레벨은 포인트에 따라 자동 결정됩니다. (LV1:0, LV2:100, LV3:250, LV4:400, LV5:600, LV6:800, LV7:1000, LV8:1300, LV9:1700, LV10:2200)"
          example: 1300

    QaSuccessResponse:
      type: object
      required:
        - success
      properties:
        success:
          type: boolean
          description: "작업 성공 여부"
          example: true

    QaPointResponse:
      type: object
      required:
        - success
        - point
        - level
      properties:
        success:
          type: boolean
          description: "작업 성공 여부"
          example: true
        point:
          type: integer
          format: int64
          description: "설정된 포인트"
          example: 1300
        level:
          type: integer
          description: "포인트에 해당하는 레벨 (1-10)"
          example: 8

