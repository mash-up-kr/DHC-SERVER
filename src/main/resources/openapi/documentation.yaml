openapi: "3.0.3"
info:
  title: "Application API"
  description: "Application API"
  version: "1.0.0"
paths:
  /api/users:
    get:
      summary: "Search User by Token"
      description: "Find a user by their user token"
      parameters:
        - name: userToken
          in: query
          required: true
          schema:
            type: string
          description: "User token to search for"
          example: "user123token"
      responses:
        "200":
          description: "User found successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SearchUserResponse"
              example:
                id: "507f1f77bcf86cd799439011"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 404
                message: "User not found"

  /api/users/register:
    post:
      summary: "Register User"
      description: "Register a new user with their profile information and mission preferences"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterUserRequest"
            example:
              userToken: "user123token"
              gender: "MALE"
              birthDate:
                date: "2000-01-01"
                calendarType: "SOLAR"
              birthTime: "09:30:00"
              preferredMissionCategoryList: [ "FOOD", "TRANSPORTATION" ]
      responses:
        "201":
          description: "User registered successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RegisterUserResponse"
              example:
                id: "507f1f77bcf86cd799439011"
        "409":
          description: "User already exists"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 409
                message: "User already exists"

  /api/users/{userId}/missions/{missionId}:
    put:
      summary: "Change Mission Status"
      description: "Change the completion status of a specific mission for a user or switch to a new mission"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
        - name: missionId
          in: path
          required: true
          schema:
            type: string
          description: "Mission ID"
          example: "507f1f77bcf86cd799439022"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ToggleMissionRequest"
            examples:
              complete_mission:
                summary: "Complete a mission"
                value:
                  finished: true
              switch_mission:
                summary: "Switch to a new mission"
                value:
                  switch: true
              mark_incomplete:
                summary: "Mark mission as incomplete"
                value:
                  finished: false
      responses:
        "200":
          description: "Mission status updated successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ToggleMissionResponse"
              example:
                missions:
                  - missionId: "507f1f77bcf86cd799439022"
                    category: "식음료"
                    difficulty: 3
                    type: "DAILY"
                    finished: true
                    cost: "10.00"
                    endDate: "2024-01-15"
                    title: "오늘 점심은 집에서 해먹기"
                    switchCount: 0
        "400":
          description: "Validation error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"

  /api/users/{userId}/done:
    post:
      summary: "End Today's Missions"
      description: "Complete today's missions and calculate total saved money"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EndTodayMissionRequest"
            example:
              date: "2024-01-15"
      responses:
        "200":
          description: "Today's missions completed successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EndTodayMissionResponse"
              example:
                todaySavedMoney: "25.50"

  /api/users/{userId}:
    delete:
      summary: "Delete User"
      description: "Delete user account"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "User deleted successfully"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/users/{userId}/fortune:
    get:
      summary: "Get Daily Fortune"
      description: "Get daily fortune for a specific user and date"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
        - name: date
          in: query
          required: false
          schema:
            type: string
            format: date
          description: "Date in YYYY-MM-DD format. If not provided, uses current date."
          example: "2024-01-15"
      responses:
        "200":
          description: "Daily fortune retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DailyFortuneResponse"
              example:
                date: "2024-01-15"
                fortuneTitle: "좋은 하루"
                fortuneDetail: "오늘은 좋은 일이 생길 것입니다"
                totalScore: 60
                positiveScore: 80
                negativeScore: 20
                tips:
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/today-menu.png"
                    title: "오늘의 추천메뉴"
                    description: "샐러드"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/lucky-color.png"
                    title: "행운의 색상"
                    description: "파란색"
                    hexColor: "#0000FF"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/jinxed-color.png"
                    title: "피해야 할 색상"
                    description: "빨간색"
                    hexColor: "#FF0000"
                  - image: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/jinxed-menu.png"
                    title: "피해야 할 음식"
                    description: "매운 음식"
                cardInfo:
                  image: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
                  title: "최고의 날"
                  subTitle: "네잎클로버"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/users/{userId}/add-july-history:
    post:
      summary: "Add July Past Routine History"
      description: "Add past routine history for July with predefined mission completion status. This API can only be called once per user."
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "201":
          description: "July history added successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AddJulyHistoryResponse"
              example:
                userId: "507f1f77bcf86cd799439011"
                year: 2024
                month: 7
                addedDays: 11
                totalSavedMoney: "350.00"
        "409":
          description: "July history already exists for this user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 409
                message: "Conflict - July history already exists"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 404
                message: "User not found"

  /api/mission-categories:
    get:
      summary: "Get Mission Categories"
      description: "Get all available mission categories with their names and image URLs (excludes SELF_REFLECTION)"
      responses:
        "200":
          description: "Mission categories retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MissionCategoriesResponse"
              example:
                categories:
                  - name: "TRANSPORTATION"
                    displayName: "이동·교통"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/transportation.png"
                  - name: "FOOD"
                    displayName: "식음료"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/food.png"
                  - name: "DIGITAL"
                    displayName: "디지털·구독"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/digital.png"
                  - name: "SHOPPING"
                    displayName: "쇼핑"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/shopping.png"
                  - name: "TRAVEL"
                    displayName: "취미·문화"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/travel.png"
                  - name: "SOCIAL"
                    displayName: "사교·모임"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/social.png"

  /view/users/{userId}/home:
    get:
      summary: "Get Home View"
      description: "Get user's home view with long-term mission, today's daily missions, and today's fortune"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "Home view data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HomeViewResponse"
              example:
                longTermMission:
                  missionId: "507f1f77bcf86cd799439033"
                  category: "취미·문화"
                  difficulty: 5
                  type: "LONG_TERM"
                  finished: false
                  cost: "100.00"
                  endDate: "2024-12-31"
                  title: "여행 가기 위해 돈 모으기"
                  switchCount: 0
                todayDailyMissionList:
                  - missionId: "507f1f77bcf86cd799439044"
                    category: "식음료"
                    difficulty: 2
                    type: "DAILY"
                    finished: false
                    cost: "15.00"
                    endDate: "2024-01-15"
                    title: "점심 도시락 싸가기"
                    switchCount: 1
                  - missionId: "507f1f77bcf86cd799439055"
                    category: "이동·교통"
                    difficulty: 1
                    type: "DAILY"
                    finished: true
                    cost: "5.00"
                    endDate: "2024-01-15"
                    title: "대중교통 이용하기"
                    switchCount: 0
                todayDailyFortune:
                  date: "2024-01-15"
                  fortuneTitle: "좋은 하루"
                  positiveScore: 75
                  negativeScore: 25
                  totalScore: 50
                  fortuneCardImage: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
                  fortuneCardTitle: "네잎클로버"
                  fortuneCardSubTitle: "최고의 날"
                todayDone: false

  /view/users/{userId}/myPage:
    get:
      summary: "Get My Page View"
      description: "Get user's profile information with animal card"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "My page data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MyPageResponse"
              example:
                animalCard:
                  name: "봄의 흰 말"
                  cardImageUrl: ""
                birthDate:
                  date: "2000-01-01"
                  calendarType: "SOLAR"
                birthTime: "09:30:00"
                preferredMissionCategoryList:
                  - name: "FOOD"
                    displayName: "식음료"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/food.png"
                  - name: "TRANSPORTATION"
                    displayName: "이동·교통"
                    imageUrl: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/transportation.png"
                alarm: true
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /view/users/{userId}/analysis:
    get:
      summary: "Get Analysis View"
      description: "Get user's spending analysis and mission completion statistics with generation comparison data"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "Analysis data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AnalysisViewResponse"
              example:
                totalSavedMoney: "1250.00"
                weeklySavedMoney: "85.50"
                monthlySpendMoney: "320.00"
                generationMoneyViewResponse:
                  generation: "TWENTIES"
                  gender: "MALE"
                  averageSpendMoney: "70400.00"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /view/users/{userId}/calendar:
    get:
      summary: "Get Calendar View"
      description: "Get user's calendar view with three months of mission completion data based on the specified year-month"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
        - name: yearMonth
          in: query
          required: false
          schema:
            type: string
            pattern: "^\\d{4}-\\d{2}$"
          description: "Base year-month in YYYY-MM format. If not provided, uses current year-month."
          example: "2024-01"
      responses:
        "200":
          description: "Calendar data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CalendarViewResponse"
              example:
                threeMonthViewResponse:
                  - month: 12
                    averageSucceedProbability: 70
                    calendarDayMissionViews:
                      - day: 30
                        date: "2023-12-30"
                        finishedMissionCount: 2
                        totalMissionCount: 3
                      - day: 31
                        date: "2023-12-31"
                        finishedMissionCount: 1
                        totalMissionCount: 2
                  - month: 1
                    averageSucceedProbability: 75
                    calendarDayMissionViews:
                      - day: 15
                        date: "2024-01-15"
                        finishedMissionCount: 2
                        totalMissionCount: 3
                      - day: 16
                        date: "2024-01-16"
                        finishedMissionCount: 3
                        totalMissionCount: 3
                  - month: 2
                    averageSucceedProbability: 80
                    calendarDayMissionViews:
                      - day: 1
                        date: "2024-02-01"
                        finishedMissionCount: 1
                        totalMissionCount: 2
                      - day: 2
                        date: "2024-02-02"
                        finishedMissionCount: 2
                        totalMissionCount: 2
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /view/users/{userId}/reward-progress:
    get:
      summary: "Get Reward Progress View"
      description: "Get user's reward progress information including reward level and available rewards"
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
      responses:
        "200":
          description: "Reward progress data retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RewardProgressViewResponse"
              example:
                user:
                  rewardImageUrl: "testUrl"
                  rewardLevel: "LV1"
                  totalExp: 100
                rewardList:
                  - id: 1
                    title: "1년 운세"
                  - id: 2
                    title: "전반적 사주"
                  - id: 3
                    title: "복합 사주"
        "404":
          description: "User not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/storage/upload:
    post:
      summary: "Upload File"
      description: "Upload a file to storage"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: "File to upload"
                displayLogo:
                  type: string
                  description: "Display logo identifier"
                  example: "company-logo"
      responses:
        "200":
          description: "File uploaded successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadResponse"
              example:
                url: "https://storage.example.com/uploads/file.jpg"
        "400":
          description: "Bad request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 400
                message: "파일이 없습니다"

  /api/storage/{key}:
    delete:
      summary: "Delete File"
      description: "Delete a file from storage"
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
          description: "File key to delete"
          example: "uploads/file.jpg"
      responses:
        "204":
          description: "File deleted successfully"
        "400":
          description: "Bad request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 400
                message: "키가 필요합니다"

  /api/storage/url/{key}:
    get:
      summary: "Get File URL"
      description: "Get the URL of a file in storage"
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
          description: "File key"
          example: "uploads/file.jpg"
      responses:
        "200":
          description: "File URL retrieved successfully"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadResponse"
              example:
                url: "https://storage.example.com/uploads/file.jpg"
        "400":
          description: "Bad request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                code: 400
                message: "키가 필요합니다"

components:
  schemas:
    RegisterUserRequest:
      type: object
      required:
        - userToken
        - gender
        - preferredMissionCategoryList
      properties:
        userToken:
          type: string
          description: "Unique token for the user"
          example: "user123token"
        gender:
          $ref: "#/components/schemas/Gender"
        birthDate:
          $ref: "#/components/schemas/BirthDate"
        birthTime:
          type: string
          format: time
          description: "Birth time in HH:mm:ss format"
          example: "09:30:00"
          nullable: true
        preferredMissionCategoryList:
          type: array
          items:
            $ref: "#/components/schemas/MissionCategory"
          description: "List of preferred mission categories"
          example: [ "FOOD", "TRANSPORTATION" ]

    RegisterUserResponse:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: "Generated user ID"
          example: "507f1f77bcf86cd799439011"

    SearchUserResponse:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"

    ToggleMissionRequest:
      type: object
      properties:
        finished:
          type: boolean
          description: "Whether the mission is completed"
          example: true
          nullable: true
        switch:
          type: boolean
          description: "Whether to switch the mission"
          example: false
          nullable: true

    ToggleMissionResponse:
      type: object
      required:
        - missions
      properties:
        missions:
          type: array
          items:
            $ref: "#/components/schemas/Mission"
          description: "List of missions (today's daily missions and long-term mission if exists)"

    EndTodayMissionRequest:
      type: object
      required:
        - date
      properties:
        date:
          type: string
          format: date
          description: "Date in YYYY-MM-DD format"
          example: "2024-01-15"

    EndTodayMissionResponse:
      type: object
      required:
        - todaySavedMoney
      properties:
        todaySavedMoney:
          type: string
          description: "Total money saved today (Money type as string)"
          example: "25.50"

    AddJulyHistoryResponse:
      type: object
      required:
        - userId
        - year
        - month
        - addedDays
        - totalSavedMoney
      properties:
        userId:
          type: string
          description: "User ID"
          example: "507f1f77bcf86cd799439011"
        year:
          type: integer
          description: "Year of the added history"
          example: 2024
        month:
          type: integer
          description: "Month of the added history (always 7 for July)"
          example: 7
        addedDays:
          type: integer
          description: "Number of days with history added"
          example: 11
        totalSavedMoney:
          type: string
          description: "Total money saved from all added missions (Money type as string)"
          example: "350.00"

    HomeViewResponse:
      type: object
      properties:
        longTermMission:
          $ref: "#/components/schemas/Mission"
          nullable: true
        todayDailyMissionList:
          type: array
          items:
            $ref: "#/components/schemas/Mission"
          description: "List of today's daily missions"
        todayDailyFortune:
          $ref: "#/components/schemas/FortuneResponse"
          nullable: true
        todayDone:
          type: boolean
          description: "Whether today's missions are completed"
          example: false

    MissionCategoriesResponse:
      type: object
      required:
        - categories
      properties:
        categories:
          type: array
          items:
            $ref: "#/components/schemas/MissionCategoryResponse"
          description: "List of all available mission categories (excludes SELF_REFLECTION)"

    MissionCategoryResponse:
      type: object
      required:
        - name
        - displayName
        - imageUrl
      properties:
        name:
          type: string
          description: "Mission category name (enum value)"
          example: "FOOD"
        displayName:
          type: string
          description: "Mission category display name in Korean"
          example: "식음료"
        imageUrl:
          type: string
          description: "URL of the category image"
          example: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/food.png"

    MyPageResponse:
      type: object
      required:
        - animalCard
        - birthDate
        - preferredMissionCategoryList
        - alarm
      properties:
        animalCard:
          $ref: "#/components/schemas/AnimalCard"
        birthDate:
          $ref: "#/components/schemas/BirthDate"
        birthTime:
          type: string
          format: time
          description: "Birth time in HH:mm:ss format"
          example: "09:30:00"
          nullable: true
        preferredMissionCategoryList:
          type: array
          items:
            $ref: "#/components/schemas/MissionCategoryResponse"
          description: "List of preferred mission categories with image URLs"
        alarm:
          type: boolean
          description: "Whether alarm is enabled (hardcoded to true)"
          example: true

    AnalysisViewResponse:
      type: object
      required:
        - totalSavedMoney
        - weeklySavedMoney
        - monthlySpendMoney
        - generationMoneyViewResponse
      properties:
        totalSavedMoney:
          type: string
          description: "Total amount of money saved (Money type as string)"
          example: "1250.00"
        weeklySavedMoney:
          type: string
          description: "Amount of money saved this week (Money type as string)"
          example: "85.50"
        monthlySpendMoney:
          type: string
          description: "Amount of money spent this month (Money type as string)"
          example: "320.00"
        generationMoneyViewResponse:
          $ref: "#/components/schemas/GenerationMoneyViewResponse"
          description: "Generation-based spending comparison data"

    AnalysisMonthViewResponse:
      type: object
      required:
        - month
        - averageSucceedProbability
        - calendarDayMissionViews
      properties:
        month:
          type: integer
          minimum: 1
          maximum: 12
          description: "Month number (1-12)"
          example: 1
        averageSucceedProbability:
          type: integer
          description: "Average success probability as percentage for this month"
          example: 75
        calendarDayMissionViews:
          type: array
          items:
            $ref: "#/components/schemas/CalendarDayMissionView"
          description: "Calendar view of daily missions for this month"

    AnimalCard:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: "Animal card name (generated from birth date: season + color + animal)"
          example: "봄의 흰 말"
        cardImageUrl:
          type: string
          description: "URL of the animal card image (currently empty string)"
          example: ""
          nullable: true

    Mission:
      type: object
      required:
        - missionId
        - category
        - difficulty
        - type
        - finished
        - cost
        - endDate
        - title
        - switchCount
      properties:
        missionId:
          type: string
          description: "Mission ID"
          example: "507f1f77bcf86cd799439022"
        category:
          type: string
          description: "Mission category display name in Korean"
          example: "식음료"
        difficulty:
          type: integer
          minimum: 1
          maximum: 5
          description: "Mission difficulty level"
          example: 3
        type:
          $ref: "#/components/schemas/MissionType"
        finished:
          type: boolean
          description: "Whether the mission is completed"
          example: false
        cost:
          type: string
          description: "Mission cost/reward amount (Money type as string)"
          example: "10.00"
        endDate:
          type: string
          format: date
          description: "Mission end date in YYYY-MM-DD format"
          example: "2024-12-31"
          nullable: true
        title:
          type: string
          description: "Mission title"
          example: "오늘 점심은 집에서 해먹기"
        switchCount:
          type: integer
          description: "Number of times mission has been switched"
          example: 0

    DailyFortune:
      type: object
      required:
        - date
        - fortuneTitle
        - fortuneDetail
        - jinxedColor
        - jinxedColorHex
        - jinxedMenu
        - jinxedNumber
        - luckyColor
        - luckyColorHex
        - luckyNumber
        - score
        - todayMenu
      properties:
        date:
          type: string
          description: "Fortune date in YYYY-MM-DD format"
          example: "2024-01-15"
        fortuneTitle:
          type: string
          description: "Fortune title"
          example: "좋은 하루"
        fortuneDetail:
          type: string
          description: "Detailed fortune description"
          example: "오늘은 좋은 일이 생길 것입니다"
        jinxedColor:
          type: string
          description: "Unlucky color name"
          example: "빨간색"
        jinxedColorHex:
          type: string
          description: "Unlucky color hex code"
          example: "#FF0000"
        jinxedMenu:
          type: string
          description: "Food to avoid today"
          example: "매운 음식"
        jinxedNumber:
          type: integer
          description: "Unlucky number"
          example: 4
        luckyColor:
          type: string
          description: "Lucky color name"
          example: "파란색"
        luckyColorHex:
          type: string
          description: "Lucky color hex code"
          example: "#0000FF"
        luckyNumber:
          type: integer
          description: "Lucky number"
          example: 7
        score:
          type: integer
          minimum: 0
          maximum: 100
          description: "Fortune score (used in home view)"
          example: 85
        todayMenu:
          type: string
          description: "Recommended food for today"
          example: "샐러드"

    Gender:
      type: string
      enum:
        - MALE
        - FEMALE
      description: "User gender"
      example: "MALE"

    BirthDate:
      type: object
      required:
        - date
        - calendarType
      properties:
        date:
          type: string
          format: date
          description: "Birth date in YYYY-MM-DD format"
          example: "2000-01-01"
        calendarType:
          $ref: "#/components/schemas/CalendarType"
      nullable: true

    CalendarType:
      type: string
      enum:
        - SOLAR
        - LUNAR
      description: "Calendar type for birth date"
      example: "SOLAR"

    MissionCategory:
      type: string
      enum:
        - TRANSPORTATION
        - FOOD
        - DIGITAL
        - SHOPPING
        - TRAVEL
        - SOCIAL
        - SELF_REFLECTION
      description: "Mission category (SELF_REFLECTION is excluded from mission-categories endpoint)"
      example: "FOOD"

    MissionType:
      type: string
      enum:
        - LONG_TERM
        - DAILY
      description: "Mission type"
      example: "DAILY"

    UploadResponse:
      type: object
      required:
        - url
      properties:
        url:
          type: string
          description: "URL of the uploaded file"
          example: "https://storage.example.com/uploads/file.jpg"

    ErrorResponse:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
          description: "Error code"
          example: 404
        message:
          type: string
          description: "Error message"
          example: "User not found"
        details:
          type: string
          description: "Additional error details"
          nullable: true

    ValidationErrorResponse:
      type: object
      required:
        - code
        - message
        - validationErrors
      properties:
        code:
          type: integer
          description: "Validation error code"
          example: 400
        message:
          type: string
          description: "Validation error message"
          example: "Validation failed"
        validationErrors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorDetail"
          description: "List of validation errors"

    ErrorDetail:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
          description: "Specific error code"
          example: 1001
        message:
          type: string
          description: "Specific error message"
          example: "Invalid field value"

    CalendarDayMissionView:
      type: object
      required:
        - day
        - date
        - finishedMissionCount
        - totalMissionCount
      properties:
        day:
          type: integer
          description: "Day of the month"
          example: 15
        date:
          type: string
          format: date
          description: "Date in YYYY-MM-DD format"
          example: "2024-01-15"
        finishedMissionCount:
          type: integer
          description: "Number of finished missions for this day"
          example: 2
        totalMissionCount:
          type: integer
          description: "Total number of missions for this day"
          example: 3

    CalendarViewResponse:
      type: object
      required:
        - threeMonthViewResponse
      properties:
        threeMonthViewResponse:
          type: array
          items:
            $ref: "#/components/schemas/AnalysisMonthViewResponse"
          description: "Calendar data for three months (previous, current, next)"

    GenerationMoneyViewResponse:
      type: object
      required:
        - generation
        - gender
        - averageSpendMoney
      properties:
        generation:
          $ref: "#/components/schemas/Generation"
        gender:
          $ref: "#/components/schemas/Gender"
        averageSpendMoney:
          type: string
          description: "Average spending money for this generation and gender (Money type as string)"
          example: "70400.00"

    Generation:
      type: string
      enum:
        - TEENAGERS
        - TWENTIES
        - THIRTIES
        - FORTIES
        - UNKNOWN
      description: "User generation based on age"
      example: "TWENTIES"

    FortuneColor:
      type: string
      enum:
        - RED
        - YELLOW
        - GREEN
        - WHITE
        - BLACK
      description: "Fortune color type"
      example: "RED"

    FortuneResponse:
      type: object
      required:
        - date
        - fortuneTitle
        - positiveScore
        - negativeScore
        - totalScore
        - fortuneCardImage
        - fortuneCardTitle
        - fortuneCardSubTitle
      properties:
        date:
          type: string
          description: "Fortune date in YYYY-MM-DD format"
          example: "2024-01-15"
        fortuneTitle:
          type: string
          description: "Fortune title"
          example: "좋은 하루"
        positiveScore:
          type: integer
          description: "Positive score"
          example: 80
        negativeScore:
          type: integer
          description: "Negative score"
          example: 20
        totalScore:
          type: integer
          description: "Total score"
          example: 60
        fortuneCardImage:
          type: string
          example: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
        fortuneCardTitle:
          type: string
          example: "네잎클로버"
        fortuneCardSubTitle:
          type: string
          example: "최고의 날"

    DailyFortuneResponse:
      type: object
      required:
        - date
        - fortuneTitle
        - fortuneDetail
        - totalScore
        - positiveScore
        - negativeScore
        - tips
        - cardInfo
      properties:
        date:
          type: string
          description: "Fortune date in YYYY-MM-DD format"
          example: "2024-01-15"
        fortuneTitle:
          type: string
          description: "Fortune title"
          example: "좋은 하루"
        fortuneDetail:
          type: string
          description: "Detailed fortune description"
          example: "오늘은 좋은 일이 생길 것입니다"
        totalScore:
          type: integer
          description: "Total fortune score"
          example: 60
        positiveScore:
          type: integer
          description: "Positive score"
          example: 80
        negativeScore:
          type: integer
          description: "Negative score"
          example: 20
        tips:
          type: array
          items:
            $ref: "#/components/schemas/FortuneTip"
          description: "List of fortune tips (today's menu, lucky color, jinxed color, jinxed menu)"
        cardInfo:
          $ref: "#/components/schemas/FortuneCard"
          description: "Fortune card information"

    FortuneTip:
      type: object
      required:
        - image
        - title
        - description
      properties:
        image:
          type: string
          description: "URL of the tip image"
          example: "https://kr.object.ncloudstorage.com/dhc-object-storage/uploads/today-menu.png"
        title:
          type: string
          description: "Tip title"
          example: "오늘의 추천메뉴"
        description:
          type: string
          description: "Tip description"
          example: "샐러드"
        hexColor:
          type: string
          description: "Hex color code (only for color-related tips)"
          example: "#0000FF"
          nullable: true

    FortuneCard:
      type: object
      required:
        - image
        - title
        - subTitle
      properties:
        image:
          type: string
          description: "URL of the fortune card image"
          example: "https://kr.object.ncloudstorage.com/dhc-object-storage/logos/mainCard/png/fourLeafClover.png"
        title:
          type: string
          description: "Fortune card title"
          example: "최고의 날"
        subTitle:
          type: string
          description: "Fortune card subtitle"
          example: "네잎클로버"

    RewardProgressViewResponse:
      type: object
      required:
        - user
        - rewardList
      properties:
        user:
          $ref: "#/components/schemas/RewardUserResponse"
          description: "User reward information"
        rewardList:
          type: array
          items:
            $ref: "#/components/schemas/AvailableRewardResponse"
          description: "List of available rewards"

    RewardUserResponse:
      type: object
      required:
        - rewardImageUrl
        - rewardLevel
        - totalExp
      properties:
        rewardImageUrl:
          type: string
          description: "URL of the reward image"
          example: "testUrl"
        rewardLevel:
          $ref: "#/components/schemas/RewardLevel"
          description: "Current reward level"
        totalExp:
          type: integer
          description: "Total experience points"
          example: 100

    AvailableRewardResponse:
      type: object
      required:
        - id
        - title
      properties:
        id:
          type: integer
          format: int64
          description: "Reward ID"
          example: 1
        title:
          type: string
          description: "Reward title"
          example: "1년 운세"

    RewardLevel:
      type: string
      enum:
        - LV1
        - LV2
        - LV3
        - LV4
        - LV5
        - LV6
        - LV7
        - LV8
        - LV9
        - LV10
      description: "Reward level (LV1: 새싹, LV2: 흙, LV3: 돌, LV4: 동, LV5: 은, LV6: 금, LV7: 백금, LV8: 다이아, LV9: 루비, LV10: 프리미엄)"
      example: "LV1"
